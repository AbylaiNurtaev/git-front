# Backend: цветовая палитра клуба (theme)

Чтобы клубы могли сохранять и использовать свою цветовую палитру, на бэкенде нужно добавить поле и эндпоинт ниже.

## 1. Модель клуба

Добавьте в схему/модель клуба поле `theme` (объект):

```ts
// Пример для Mongoose
theme: {
  primary: { type: String },      // hex, например "#8B5CF6"
  primaryDark: { type: String },  // hex, например "#7C3AED"
  accent: { type: String },       // hex, необязательно, например "#A78BFA"
}
```

Или один вложенный объект:

```ts
theme: {
  type: {
    primary: String,
    primaryDark: String,
    accent: String,
  },
  default: undefined,
}
```

- Все поля необязательные: клуб может не задавать тему (тогда на фронте используется дефолтная палитра).
- Значения — строка в формате hex (`#RRGGBB`). Валидация по желанию (регулярка для hex).

## 2. Отдача темы в ответах

Убедитесь, что при отдаче клуба в любых ответах API поле `theme` попадает в JSON:

- `GET /clubs/me` — данные текущего клуба (авторизация по токену клуба).
- `GET /players/club?club=...` — публичный эндпоинт получения клуба по коду/токену (для страницы спина по QR).
- `GET /admin/clubs`, `GET /admin/clubs/:id` — списки и карточка клуба для админки.

То есть во всех местах, где вы отдаёте объект клуба, добавьте в него `theme` (если есть — объект `{ primary, primaryDark, accent }`, если нет — можно не слать или `null`).

## 3. Обновление темы клуба

### Админка: редактирование клуба

В существующий эндпоинт обновления клуба добавьте приём поля `theme` в теле запроса и сохранение в БД:

- `PUT /admin/clubs/:id`  
  Тело может содержать, например:  
  `{ "name", "isActive", "managerFio", "city", "address", "latitude", "longitude", "theme" }`.  
  Если в запросе пришло `theme: { primary, primaryDark, accent }`, сохраните его в документе клуба.

### Кабинет клуба: клуб редактирует свою палитру

Нужен эндпоинт, чтобы авторизованный клуб мог обновить только свою палитру (и при необходимости другие свои поля):

- **`PATCH /clubs/me`**  
  - Авторизация: Bearer-токен клуба (тот же, что для `GET /clubs/me`).  
  - Тело запроса: `{ "theme": { "primary": "#...", "primaryDark": "#...", "accent": "#..." } }`.  
  - Действие: обновить у текущего клуба поле `theme` в БД и вернуть обновлённый объект клуба или `{ ok: true }`.

Фронт вызывает этот метод после нажатия «Сохранить палитру» в разделе «Настройки» кабинета клуба.

## 4. Краткий чеклист для бэкенда

| Задача | Эндпоинт / место |
|--------|-------------------|
| Добавить поле `theme` в модель клуба | Схема/миграция |
| Отдавать `theme` в ответах с клубом | GET /clubs/me, GET /players/club, GET /admin/clubs, GET /admin/clubs/:id |
| Принимать и сохранять `theme` при редактировании клуба админом | PUT /admin/clubs/:id |
| Дать клубу возможность обновить свою палитру | PATCH /clubs/me (тело: `{ theme }`) |

После этого фронт будет сохранять и подставлять палитру клуба в интерфейс (страница спина по QR, кабинет клуба).
